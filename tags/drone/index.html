<!doctype html><html lang=zh-tw itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title>drone - 德瑞克小窩</title>
<meta name=author content="Derek"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"德瑞克小窩","url":"https:\/\/www.k-derek.dev\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/www.k-derek.dev\/"}</script>
<meta property="og:title" content="drone">
<meta property="og:image" content="https://www.k-derek.dev/img/avatar-icon.png">
<meta property="og:url" content="https://www.k-derek.dev/tags/drone/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="德瑞克小窩">
<meta name=twitter:title content="drone">
<meta name=twitter:image content="https://www.k-derek.dev/img/avatar-icon.png">
<meta name=twitter:card content="summary">
<link href=https://www.k-derek.dev/img/favicon.ico rel=icon type=image/x-icon>
<meta name=generator content="Hugo 0.87.0"><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous>
<link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css>
<link rel=stylesheet href=https://www.k-derek.dev/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">
<link rel=stylesheet href=https://www.k-derek.dev/css/highlight.min.css><link rel=stylesheet href=https://www.k-derek.dev/css/codeblock.css><link rel=alternate type=application/rss+xml href=https://www.k-derek.dev/tags/drone/index.xml title=德瑞克小窩>
<link rel=alternate type=application/rss+xml href=https://www.k-derek.dev/tags/drone/index.xml title=德瑞克小窩>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top navbar-custom">
<div class=container-fluid>
<div class=navbar-header>
<button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>開關導覽</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://www.k-derek.dev/>德瑞克小窩</a>
</div>
<div class="collapse navbar-collapse" id=main-navbar>
<ul class="nav navbar-nav navbar-right">
<li>
<a title=Blog href=/> Blog</a>
</li>
<li>
<a title=Tags href=/tags> Tags</a>
</li>
</ul>
</div>
<div class=avatar-container>
<div class=avatar-img-border>
<a title=德瑞克小窩 href=https://www.k-derek.dev/>
<img class=avatar-img src=https://www.k-derek.dev/img/avatar-icon.png alt=德瑞克小窩>
</a>
</div>
</div>
</div>
</nav>
<header class=header-section>
<div class="intro-header no-img">
<div class=container>
<div class=row>
<div class="col-md-10 col-md-offset-1">
<div class=tags-heading>
<h1>drone</h1>
<hr class=small>
</div>
</div>
</div>
</div>
</div>
</header>
<div class=container role=main>
<div class=row>
<div class="col-md-10 col-md-offset-1">
<div class=posts-list>
<article class=post-preview>
<a href=https://www.k-derek.dev/posts/20180202/>
<h2 class=post-title>20180202</h2>
</a>
<p class=post-meta>
<span class=post-meta>
<i class="fas fa-calendar"></i>&nbsp;發表於 February 2, 2018
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;分鐘
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;99&nbsp;個字
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Derek
</span>
</p>
<div class=post-entry>
前幾日建置完Drone跟寫完PlurkBot後
今天很開心的要來實驗Drone快速自動測試的功能
隨便修改一個PlurkBot的檔案後Push!(能下Push就是爽!)
再到Drone的後台去看，很好!很正常的執行起來了!
我可以安安心心的看動畫等等來看結果
1HR~過去了
都看完兩集動畫了，結果應該也早就出來了吧
疑~怎麼還在跑??
不可能啊!
這必定有鬼，難道跟最近鬼門開有關!?
不可能，只好來查看一下log紀錄
執行 docker logs XXXXXXX
出現了!!!
time=&ldquo;2018-02-02T14:54:01Z&rdquo; level=fatal msg=&ldquo;DRONE_HOST is not properly configured&rdquo;
三小咚咚???
HOST不對?
不對阿~我明明就是按照網路的設定阿
只有Port不一樣，怎麼會這樣呢?
莫非我一定要用80，一定要這樣霸凌我嗎?
可是80又被IIS占用
只好另求他法這次來是是Nginx
結果好像更悲劇 ERROR: for nginx Cannot start service nginx: OCI runtime create failed: container_linux.go:348: starting container process caused &ldquo;process_linux.go:402: container init caused "rootfs_linux.go:58: mounting \"/host_mnt/d/Coding/Server/drone/default.conf\" to rootfs \"/var/lib/docker/overlay2/469fecfa64bb76c8c467ddfeea1084a1acdd3f279f1b38822d3a9458c243f71e/merged\" at \"/var/lib/docker/overlay2/469fecfa64bb76c8c467ddfeea1084a1acdd3f279f1b38822d3a9458c243f71e/merged/etc/nginx/conf.d/default.conf\" caused \"not a directory\""": unknown: Are you trying to mount a directory onto a file (or vice-versa)?
<a href=https://www.k-derek.dev/posts/20180202/ class=post-read-more>[閱讀全文]</a>
</div>
<div class=blog-tags>
<a href=https://www.k-derek.dev//tags/drone/>drone</a>&nbsp;
</div>
</article>
<article class=post-preview>
<a href=https://www.k-derek.dev/posts/20180130/>
<h2 class=post-title>Drone遊玩心得(2)</h2>
</a>
<p class=post-meta>
<span class=post-meta>
<i class="fas fa-calendar"></i>&nbsp;發表於 January 30, 2018
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;分鐘
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;27&nbsp;個字
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Derek
</span>
</p>
<div class=post-entry>
<p>今天設置了 google domain 將Drone的網址設置為drone.konoha-derek.com -> konoha-derek.com:8081<br>
結果實驗的時候發現出現"The system failed to process your Login request"<br>
本來以為是drone站台錯誤造成的<br>
就去把drone重啟<br>
結果更悲劇了 orz~<br>
完全無法連線drone<br>
開始各種查詢，還以為是K8s的問題，不過查看的結果跟它一點毛關係也沒有<br>
原來是我在docker-compose.yml 中把DRONE_HOST跟9000PORT拿掉的關係<br>
加回去再重新建立就可以正常了~<br>
果然不能亂改阿!<br>
不過開頭的問題還是無解~~~~~<br>
明天再來研究好了!</p>
<p>PS.今天被支付寶弄到氣炸!這就下次再來講述一篇好了XD</p>
</div>
<div class=blog-tags>
<a href=https://www.k-derek.dev//tags/drone/>drone</a>&nbsp;
</div>
</article>
<article class=post-preview>
<a href=https://www.k-derek.dev/posts/20180128/>
<h2 class=post-title>Drone遊玩心得</h2>
</a>
<p class=post-meta>
<span class=post-meta>
<i class="fas fa-calendar"></i>&nbsp;發表於 January 28, 2018
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;1&nbsp;分鐘
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;17&nbsp;個字
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Derek
</span>
</p>
<div class=post-entry>
<p>這幾日安裝Drone的心得</p>
<p>這次安裝Drone 參考了 <a href=https://yami.io/drone/>https://yami.io/drone/</a><br>
不過安裝後因為文章是80port,而80port好像被IIS給佔用了(悲劇)<br>
只好換成8081<br>
後續想換成http://domain/drone<br>
發現docker好像不能用<br>
只好先用成http://domain:8081 去做設定<br>
其實中間在連線時一直404 orz~~<br>
domin最後也是用google domain設定<br>
然後路由器偷懶設定DMZ<br>
就這樣終於架設起來了<br>
後續要來完成plurk的機器人，然後來做測試了</p>
</div>
<div class=blog-tags>
<a href=https://www.k-derek.dev//tags/drone/>drone</a>&nbsp;
</div>
</article>
</div>
</div>
</div>
</div>
<footer class=post-footer>
<div class=container>
<div class=row>
<div class="col-md-10 col-md-offset-1">
<ul class="list-inline text-center footer-links">
<li>
<a href=mailto:peter890701@gmail.com title="Email me">
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://github.com/https://github.com/KonohaDerek title=GitHub>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=/tags/drone/index.xml title=RSS>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
</ul>
<p class="credits copyright text-muted">
Derek
&nbsp;&bull;&nbsp;&copy;
2021
&nbsp;&bull;&nbsp;
<a href=https://www.k-derek.dev/>德瑞克小窩</a>
</p>
<p class="credits theme-by text-muted">
由 <a href=https://gohugo.io>Hugo v0.87.0</a> 提供 &nbsp;&bull;&nbsp; 主題 <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> 移植自 <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a>
</p>
</div>
</div>
</div>
</footer>
<script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://www.k-derek.dev/js/main.js></script>
<script src=https://www.k-derek.dev/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script>
<div class=back-to-top id=back-to-top>
<i class="fas fa-angle-double-up"></i>
</div>
</body>
</html>